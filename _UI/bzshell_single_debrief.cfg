// ================
// BATTLEZONE SHELL  //BATTLEZONE TOTAL COMMAND  //Coxxon
// ================
// Edited by General BlackDragon, added a "main" button in instant
// debriefing to go back to main shell. This is more convenient.
// Edited by Coxxon. Added the "Load" button to both SP and Instant Action debrief and stat screens.
// Creates the stock Load file screen, with the return to Main button.
// For when you fail or get killed, and don't want to go back to Main to load a saved game.
// Or, if you're like me and keep getting killed while testing your mod, and want to reload faster.
// Debriefing after a SP game. Shows first page, then results
CreateControl("SingleDeBrief", "WINDOW")
{

	// inherit root window's dimensions
	Geometry("PARENTWIDTH", "PARENTHEIGHT");

	// set window style
	Style("TRANSPARENT");
	CreateControl("BriefingWindow", "WINDOW")
	{
		Geometry("HCENTRE", "VCENTRE");
		ColorGroup("MAGENTA");
		Position(0, 15);
		Size(360, 302);
		BorderSize(10);
		BevelSize(5);
		TabSize(150, 10);
		Style("OUTLINE");
		Title("Debriefing");
		TitleFont("MEDIUM");

		CreateControl("List", "LISTBOX")
		{
			ColorGroup("LISTBOX");
			Style("VSLIDER");
			Geometry("LEFT", "TOP");
			Position(0, 0);
			Size(360, 297);
			CellSize(344, 11);
			SliderPadding(9);
			Font("TINY");  //Coxxon
			Style("INERT", "NOSELECTION", "TRANSPARENT");
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
		}
	}

	CreateControl("Okay", "BUTTON")
	{
		Geom("RIGHT");
		ColorGroup("MAGENTA");
		Position(-20, 20);
		Size(130, 0);
		BorderSize(10);
		BevelSize(5);
		Font("MEDIUM");
		JustifyText("CENTER");
		Text("Continue");
		Style("ROLLOVER", "OUTLINE");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Continue");
	}

	CreateControl("Main", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Position(20, 20);
		Size(130, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Main");
		Font("MEDIUM");
		Cursor("DARK");
		NotifyParent("Button::Select", "Back");
		UseVar("shell.page");
		Value(-1);
	}

	//Debrief page - Cuz U B dead, and don't wanna go to Main to Load a save file  --Coxxon
	CreateControl("Load", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("BOTTOM", "RIGHT");
		Position(-20, -20);
		Size(111, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Load");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Load");
		UseVar("shell.page");
		Value(3);  //to load screen Coxxon
	}
	
//button sorta "works", but I suspect that the cmd below can't get back to a mission that has already ended 
//b/c it doesn't know where to go, unlike the pause restart where the mission is already running.
//	CreateControl("Restart", "BUTTON")  // Coxxon
//	{
//		ColorGroup("MAGENTA");
//		Geometry("BOTTOM", "LEFT");
//		Position(20, -20);
//		Size(111, 0);
//		BorderSize(10);
//		BevelSize(5);
//		Style("ROLLOVER", "RADIO", "OUTLINE");
//		Text("Restart");
//		Font("MEDIUM");
//		Cursor("Highlight");
//		NotifyParent("Button::Press", "Restart");
//	}
//	
//	//FOR ADDED RESTART BUTTON  coxoxn
//	OnEvent("Restart")
//	{
//		Cmd("mission.restart");
//		Cmd("options.warnrestartchanges 0");
//	}

//this version button begins restart process, but fails with in-game error message
//	CreateControl("Restart", "BUTTON")  // Coxxon
//	{
//		ColorGroup("MAGENTA");
//		Geometry("BOTTOM", "LEFT");
//		Position(20, -20);
//		Size(111, 0);
//		BorderSize(10);
//		BevelSize(5);
//		Style("ROLLOVER", "RADIO", "OUTLINE");
//		Text("Restart");
//		Font("MEDIUM");
//		Cursor("Highlight");
//		NotifyParent("Button::Select", "Restart");
//		UseVar("shell.page");
//	}
//
//	OnEvent("Restart")
//	{	cmd("shell.stopSound cdaudiotrack25.ogg");  //mire22_3.wav");
//		Cmd("shell.single.launch");
//	}

	OnEvent("Back")
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellMain");
	}	

	OnEvent("Continue")
	{
		FadeOut();
		FadeIn("|SingleDeBrief2");
		
		//this is an alternative which will skip the stats screen for SP and IA games
		//FadeOut();
		//FadeIn("|ShellSingle");
		//cmd("shell.stopSound mire22_6.wav");
		//Cmd("shell.single.enter");
	}

	OnEvent("Load")  //Coxxon added
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellLoad");
	}	

	OnEvent("Control::ActivateSelf")
	{
		//Coxxon cmd("shell.background singlep_briefing.tga");
		cmd("shell.background singlep_debrief.tga");  //Coxxon added
		cmd("shell.backgroundSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
	}
}

CreateControl("SingleDeBrief2", "WINDOW")
{
	Style("TRANSPARENT", "INERT");
	Geom("PARENTWIDTH", "PARENTHEIGHT");

	OnEvent("Control::ActivateSelf")
	{
		cmd("shell.background multip_end.tga");
	}

	CreateControl("Continue", "BUTTON")
	{
		Geom("RIGHT");
		ColorGroup("MAGENTA");
		Position(-20, 20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "OUTLINE", "BLINK");
		Text("Continue");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Next");
	}

	CreateControl("Main", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Position(20, 20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Main");
		Font("MEDIUM");
		Cursor("DARK");
		NotifyParent("Button::Select", "Back");
		UseVar("shell.page");
		Value(-1);
	}
	
	//Stats page - Cuz U didn't load a save from the previous debrief page  --Coxxon
	CreateControl("Load", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("BOTTOM", "RIGHT");
		Position(-20, -20);
		Size(111, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Load");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Load");
		UseVar("shell.page");
		Value(3);  //to load screen Coxxon
	}
	
//button sorta "works", but I suspect that the cmd below can't get back to a mission that has already ended 
//b/c it doesn't know where to go, unlike the pause restart where the mission is already running.
//	CreateControl("Restart", "BUTTON")  // Coxxon
//	{
//		ColorGroup("MAGENTA");
//		Geometry("BOTTOM", "LEFT");
//		Position(20, -20);
//		Size(111, 0);
//		BorderSize(10);
//		BevelSize(5);
//		Style("ROLLOVER", "RADIO", "OUTLINE");
//		Text("Restart");
//		Font("MEDIUM");
//		Cursor("Highlight");
//		NotifyParent("Button::Press", "Restart");
//	}
//	
//	//FOR ADDED RESTART BUTTON  coxoxn
//	OnEvent("Restart")
//	{
//		Cmd("mission.restart");
//		Cmd("options.warnrestartchanges 0");
//	}

	OnEvent("Next")
	{
		FadeOut();
		FadeIn("|ShellSingle");
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		Cmd("shell.single.enter");
	}

	OnEvent("Back")
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellMain");
	}
	
	OnEvent("Load")  //Coxxon added
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellLoad");
	}

	CreateControl("ShellMultiEnd", "WINDOW")
	{
		Geometry("HCENTRE", "VCENTRE");
		ColorGroup("MAGENTA");
		Position(0, 15);
		Size(600, 250);
		BorderSize(10);
		BevelSize(5);
		TabSize(150, 10);
		Title("Game Results");
		TitleFont("MEDIUM");
		Style("OUTLINE");

		CreateControl("SelectionSlider", "LISTSLIDER")
		{
			Orientation("VERTICAL");
			Geometry("LEFT", "TOP");
			Position(580, 40);
			Size(10, 210);
			Style("BUTTONS", "ROLLOVER");
			Cursor("Highlight");
			// Do NOT use a var for this slider!
			// It's controlled automagically by association
		}

		CreateControl("ScoreColumn1", "LISTBOX")
		{
			ColorGroup("LISTBOX");	
			Geometry("LEFT", "TOP");
			Position(50, 40);
			Size(400, 210);
			CellSize(390, 15);
			Font("Small");
			UseVar("network.scoredisplay");
			Style("NOSELECTION", "TRANSPARENT");
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
			UseSlider("<SelectionSlider");
		}

		CreateControl("ScoreColumn2", "LISTBOX")
		{
			ColorGroup("LISTBOX");	
			Geometry("LEFT", "TOP");
			Position(450, 40);
			Size(70, 210);
			CellSize(60, 15);
			Font("Small");
			UseVar("network.scoredisplay");
			Style("NOSELECTION", "TRANSPARENT");
			ItemConfig()
  			{
  				Style("TRANSPARENT");
  			}
			UseSlider("<SelectionSlider");
		}
	}
}

CreateControl("InstantDeBrief", "WINDOW")
{
	Geometry("PARENTWIDTH", "PARENTHEIGHT");
	Style("TRANSPARENT");
	
	CreateControl("BriefingWindow", "WINDOW")
	{
		Geometry("HCENTRE", "VCENTRE");
		ColorGroup("MAGENTA");
		Position(0, 15);
		Size(360, 302);
		BorderSize(10);
		BevelSize(5);
		TabSize(150, 10);
		Style("OUTLINE");
		Title("Debriefing");
		TitleFont("SMALL");

		CreateControl("List", "LISTBOX")
		{
			ColorGroup("LISTBOX");
			Style("VSLIDER");
			Geometry("LEFT", "TOP");
			Position(0, 0);
			Size(360, 300);
			CellSize(335, 10);
			SliderPadding(10);
			Style("NOSELECTION", "TRANSPARENT");
			Font("TINY");  //Coxxon
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
		}
	}

	CreateControl("Okay", "BUTTON")
	{
		Geom("RIGHT");
		ColorGroup("MAGENTA");
		Position(-20, 20);
		Size(130, 0);
		BorderSize(10);
		BevelSize(5);
		Font("MEDIUM");
		JustifyText("CENTER");
		Text("Continue");
		Style("ROLLOVER", "OUTLINE");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Continue");
	}	

	CreateControl("Main", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Position(20, 20);
		Size(130, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Main");
		Font("MEDIUM");
		Cursor("DARK");
		NotifyParent("Button::Select", "Back");
		UseVar("shell.page");
		Value(-1);
	}
	
	//Debrief page - Cuz U B dead, and don't wanna go to Main to Load a save file  --Coxxon
	CreateControl("Load", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("BOTTOM", "RIGHT");
		Position(-20, -20);
		Size(111, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Load");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Load");
		UseVar("shell.page");
		Value(3);  //to load screen Coxxon
	}

	OnEvent("Continue")
	{
		FadeOut();
		FadeIn("|InstantDeBrief2");
	}	

	OnEvent("Back")
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellMain");
	}
	
	OnEvent("Load")  //Coxxon added
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellLoad");
	}

	OnEvent("Control::ActivateSelf")
	{
		//Coxxon  cmd("shell.background singlep_briefing.tga");
		cmd("shell.background singlep_debrief.tga");  //Coxxon added
		cmd("shell.backgroundSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
	}
}

CreateControl("InstantDeBrief2", "WINDOW")
{
	Style("TRANSPARENT", "INERT");
	Geom("PARENTWIDTH", "PARENTHEIGHT");

	OnEvent("Control::ActivateSelf")
	{
		cmd("shell.background multip_end.tga");
	}

	CreateControl("Continue", "BUTTON")
	{
		Geom("RIGHT");
		ColorGroup("MAGENTA");
		Position(-20, 20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "OUTLINE", "BLINK");
		Text("Continue");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Next");
	}

	CreateControl("Main", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Position(20, 20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Main");
		Font("MEDIUM");
		Cursor("DARK");
		NotifyParent("Button::Select", "Back");
		UseVar("shell.page");
		Value(-1);
	}
	
	//Debrief page - Cuz U B dead, and don't wanna go to Main to Load a save file  --Coxxon
	CreateControl("Load", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("BOTTOM", "RIGHT");
		Position(-20, -20);
		Size(111, 0);
		BorderSize(10);
		BevelSize(5);
		Style("ROLLOVER", "RADIO", "OUTLINE");
		Text("Load");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Load");
		UseVar("shell.page");
		Value(3);  //to load screen Coxxon
	}

	OnEvent("Next")
	{
		FadeOut();
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeIn("|ShellInstant");
		Cmd("shell.instant.load");
	}

	OnEvent("Back")
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellMain");
	}
	
	OnEvent("Load")  //Coxxon added
	{
		cmd("shell.stopSound cdaudiotrack28.ogg");  //mire22_6.wav");  //Coxxon
		FadeOut();
		FadeIn("|ShellLoad");
	}

	CreateControl("ShellMultiEnd", "WINDOW")
	{
		Geometry("HCENTRE", "VCENTRE");
		ColorGroup("MAGENTA");
		Position(0, 15);
		Size(600, 250);
		BorderSize(10);
		BevelSize(5);
		TabSize(150, 10);
		Title("Game Results");
		TitleFont("MEDIUM");
		Style("OUTLINE");

		CreateControl("SelectionSlider", "LISTSLIDER")
		{
			Orientation("VERTICAL");
			Geometry("LEFT", "TOP");
			Position(580, 40);
			Size(10, 210);
			Style("BUTTONS", "ROLLOVER");
			Cursor("Highlight");
			// Do NOT use a var for this slider!
			// It's controlled automagically by association
		}

		CreateControl("ScoreColumn1", "LISTBOX")
		{
			ColorGroup("LISTBOX");	
			Geometry("LEFT", "TOP");
			Position(50, 40);
			Size(400, 210);
			CellSize(390, 15);
			Font("Small");
			UseVar("network.scoredisplay");
			Style("NOSELECTION", "TRANSPARENT");
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
			UseSlider("<SelectionSlider");
		}

		CreateControl("ScoreColumn2", "LISTBOX")
		{
			ColorGroup("LISTBOX");	
			Geometry("LEFT", "TOP");
			Position(450, 40);
			Size(70, 210);
			CellSize(60, 15);
			Font("Small");
			UseVar("network.scoredisplay");
			Style("NOSELECTION", "TRANSPARENT");
			ItemConfig()
  			{
  				Style("TRANSPARENT");
  			}
			UseSlider("<SelectionSlider");
		}
	}
}
